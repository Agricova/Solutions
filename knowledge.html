<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Knowledge Base – Agricova</title>

  <!-- Your global styles (kept exactly as on every other page) -->
  <link rel="stylesheet" href="css/main.css">

  <!-- Page-specific: stacking order + dynamic top-offset for the iframe -->
  <style>
    /* keep navbar above everything */
    nav            { position:fixed; top:0; left:0; right:0; z-index:20000; }
    nav ul         { z-index:20001; }
    nav .menu-toggle { z-index:20002; }

    /* let JS write the real height into a CSS custom property */
    :root{ --nav-h:60px; }   /* fallback */

    /* Knowledge-Base iframe */
    iframe.kb{
      width:100%;
      border:0;
      display:block;
      margin-top:var(--nav-h);              /* pushed below nav */
      height:calc(100vh - var(--nav-h));    /* fills the rest */
    }

    /* while the dropdown is open, stop the iframe swallowing taps */
    @media (max-width:768px){
      body.menu-open iframe.kb{ pointer-events:none; }
    }
  </style>
</head>

<body>
  <!-- NAVBAR (identical markup) -->
  <nav>
    <button class="menu-toggle" aria-label="Toggle navigation" aria-expanded="false">☰</button>
    <a href="index.html">
      <img src="https://www.agricova.com/cdn/shop/t/12/assets/logo.png" alt="Agricova logo">
    </a>

    <ul>
      <li><a href="automation.html">Automation</a></li>
      <li><a href="https://www.agricova.com/collections/garden-supplies" target="_blank">Store</a></li>
      <li><a href="quote.html">Get&nbsp;Quote</a></li>
      <li><a href="about.html">About&nbsp;Us</a></li>
      <li><a href="knowledge.html">Knowledge&nbsp;Base</a></li>
    </ul>
  </nav>

  <!-- EMBEDDED KB -->
  <iframe class="kb" src="https://agricova.tawk.help" title="Agricova Knowledge Base"></iframe>

  <!-- MOBILE MENU TOGGLE + dynamic nav height sync -->
  <script>
    (function(){
      const toggle  = document.querySelector('.menu-toggle');
      const navUl   = document.querySelector('nav ul');
      const navBar  = document.querySelector('nav');
      const root    = document.documentElement;

      function syncNavHeight(){
        /* write the current pixel height to the CSS custom property */
        const h = navBar.offsetHeight;
        root.style.setProperty('--nav-h', h + 'px');
      }

      /* update on load & whenever window resizes/orientation changes */
      window.addEventListener('load',  syncNavHeight);
      window.addEventListener('resize',syncNavHeight);

      /* mobile dropdown behaviour */
      if(toggle && navUl){
        toggle.addEventListener('click', () => {
          const open = toggle.getAttribute('aria-expanded') === 'true';
          toggle.setAttribute('aria-expanded', !open);
          navUl.classList.toggle('show');
          document.body.classList.toggle('menu-open');
        });
      }
    })();
  </script>

  <!-- tawk.to live-chat widget (unchanged) -->
  <script>
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
      var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
      s1.async=true;
      s1.src="https://embed.tawk.to/6854b89edabf301911aabda0/1iusf2b76"; /* replace IDs if needed */
      s1.charset="UTF-8";
      s1.setAttribute("crossorigin","*");
      s0.parentNode.insertBefore(s1,s0);
    })();
  </script>
</body>
</html>
